[{"kind":1,"language":"markdown","value":"# 3rd Party JDBC Drivers Smoke Testing with SAS/ACCESS Interface to JDBC","outputs":[]},{"kind":1,"language":"markdown","value":"This notebook explains how to perform a smoke test to ensure that a connection using SAS/ACCESS Interface to JDBC and 3rd party JDBC driver is working correctly. A smoke test is a quick and simple test that verifies that the basic functionality of the connection is working as expected.","outputs":[]},{"kind":1,"language":"markdown","value":"## Libraries Creation","outputs":[]},{"kind":1,"language":"markdown","value":"### SAS Compute Library Creation","outputs":[]},{"kind":2,"language":"sas","value":"options sastrace=\"d,,,\" sastraceloc=saslog nostsuffix ;\r\nlibname mylib jdbc\r\ndriverclass=\"\"\r\nURL=\"\"\r\nschema=\"schema\"\r\nuser=\"usr\"\r\npassword=\"pw\"\r\npreserve_tab_names=yes\r\npreserve_col_names=yes;\r\n/*materialized=yes; //Allows for permanment table creation */","outputs":[]},{"kind":1,"language":"markdown","value":"### CAS Library Creation","outputs":[]},{"kind":2,"language":"sas","value":"cas;\r\ncaslib mycaslib desc='JDBC Caslib'\r\n   dataSource=(srctype='jdbc',\r\n                driverclass=\"\",\r\n                url=\"\",\r\n                user=\"usr\",\r\n                password=\"pw\",\r\n                schema=\"schema\");\r\ncaslib _all_ assign;","outputs":[]},{"kind":1,"language":"markdown","value":"## Table Creation Tests","outputs":[]},{"kind":2,"language":"sas","value":"/* Create Table Airline */\r\nproc delete data=mylib.airline;\r\nrun;\r\n\r\ndata mylib.airline; set sashelp.airline;\r\nrun;","outputs":[]},{"kind":2,"language":"sas","value":"/* Create Table Class */\r\nproc delete data=mylib.class;\r\nrun;\r\n\r\ndata mylib.class; set sashelp.class;\r\nrun;","outputs":[]},{"kind":1,"language":"markdown","value":"## Proc SQL Tests","outputs":[]},{"kind":2,"language":"sas","value":"/* Delete Table Proc Delete */\r\nproc delete data=mylib.class2;\r\nrun;","outputs":[]},{"kind":2,"language":"sql","value":"/* Create Table */\r\ncreate table mylib.class2 as select * from mylib.class;","outputs":[]},{"kind":2,"language":"sql","value":"/* Update Table */\r\nupdate mylib.class set name='billyb' where name='Alfred';","outputs":[]},{"kind":2,"language":"sql","value":"/* Delete Table SQL */\r\ndelete from mylib.class where name = 'Alfred';","outputs":[]},{"kind":2,"language":"sql","value":"/* Insert into Table */\r\ninsert into mylib.class (name) values ('ted');","outputs":[]},{"kind":2,"language":"sas","value":"proc delete data=mylib.class2 mylib.class;\r\nrun;   ","outputs":[]},{"kind":2,"language":"sql","value":"/* Drop Table */\r\n/* expect table not there, common problem */\r\n/* an ERROR message means table not found wasnâ€™t detected */\r\ndrop table mylib.nosuch;","outputs":[]},{"kind":1,"language":"markdown","value":"## Implicit SQL Tests","outputs":[]},{"kind":2,"language":"sas","value":"/* Create Table Class */\r\ndata mylib.class;\r\n set sashelp.class;\r\nrun;","outputs":[]},{"kind":2,"language":"sql","value":"select age **2 from mylib.class;","outputs":[]},{"kind":2,"language":"sql","value":"select distinct age **2 from mylib.class;","outputs":[]},{"kind":1,"language":"markdown","value":"## FedSQL Test","outputs":[]},{"kind":2,"language":"sas","value":"/* IPTRACE shows the generated query */\r\noptions msglevel=n;\r\n\r\nproc fedsql iptrace;\r\n select * from MYLIB.class;\r\nquit;","outputs":[]},{"kind":1,"language":"markdown","value":"## Load Data to Caslib","outputs":[]},{"kind":2,"language":"sas","value":"/* Use the DATA Step to Load Data */\r\ndata mycaslib.cars;            \r\n    set sashelp.cars;\r\n run;","outputs":[]},{"kind":2,"language":"sas","value":"/* Use PROC CASUTIL to Load Data */\r\nproc casutil outcaslib=\"mycaslib\" ;\r\n    load data=sashelp.heart replace ;\r\n run;","outputs":[]},{"kind":2,"language":"sas","value":"proc cas;\r\n    fedsql.execdirect query='select count(*) from mycaslib.heart';\r\nquit;","outputs":[]}]